<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: measurements.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: measurements.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const validateDimension = dimension => {
  if (dimension !== 'height' &amp;&amp; dimension !== 'width') {
    throw new ReferenceError(
      `Invalid dimension: ${dimension}. Use 'height' or 'width'`
    );
  }
};

const getMarginNumericValue = margin => {
  return +margin.match(/[\d.]+/);
};

const getVertMargin = (margins, arrLength) => {
  let marginSize = 0;
  if ((arrLength === 1 || arrLength === 2) &amp;&amp; margins[0] !== '0px') {
    marginSize = 2 * getMarginNumericValue(margins[0]);
  } else if (arrLength === 3 || arrLength === 4) {
    marginSize = getMarginNumericValue(margins[0]);
    marginSize += getMarginNumericValue(margins[2]);
  }

  return marginSize;
};

const getHorizMargin = (margins, arrLength) => {
  let marginSize = 0;
  if (arrLength === 2 || arrLength === 3) {
    marginSize = 2 * getMarginNumericValue(margins[1]);
  } else if (arrLength === 4) {
    marginSize = getMarginNumericValue(margins[1]);
    marginSize += getMarginNumericValue(margins[3]);
  }

  return marginSize;
};

const getElementMargins = (element, axis) => {
  const calcMargins = {
    horizontal: getHorizMargin,
    vertical: getVertMargin,
  };

  const margins = getComputedStyle(element).margin.split(' ');
  const arrLength = margins.length;

  return calcMargins[axis](margins, arrLength);
};

const getElementMeasure = (element, dimension) => {
  validateDimension(dimension);

  element.style.setProperty(
    'display',
    getComputedStyle(element).display === 'none' ? 'block' : ''
  );

  const measure =
    dimension === 'height' ? element.offsetHeight : element.offsetWidth;

  element.style.removeProperty('display');

  return (
    measure +
    getElementMargins(
      element,
      dimension === 'height' ? 'vertical' : 'horizontal'
    )
  );
};

const getParentMeasure = (elem, dimension) => {
  validateDimension(dimension);

  const measure = {};
  const parent = elem.parentElement;

  /** parent measurement before setting child to display: none */
  measure.before =
    dimension === 'height' ? parent.offsetHeight : parent.offsetWidth;
  if (getComputedStyle(elem).display === 'none') {
    measure.before += getElementMeasure(elem, dimension);
  }

  elem.style.setProperty('display', 'none');
  /** parent measurement after setting child to display: none */
  measure.after =
    dimension === 'height' ? parent.offsetHeight : parent.offsetWidth;
  elem.style.removeProperty('display');

  return measure;
};

const getParentMeasures = elem => {
  return {
    height: getParentMeasure(elem, 'height'),
    width: getParentMeasure(elem, 'width'),
  };
};

const measured = {
  hide: { initial: 'before', final: 'after' },
  show: { initial: 'after', final: 'before' },
};

const setDimensionMax = (elem, dimension, value) =>
  elem.style.setProperty(`max-${dimension}`, value);

const removeDimensionMax = (elem, dimension) =>
  elem.style.removeProperty(`max-${dimension}`);

const setParentMaxMeasures = args => {
  const {
    parentState = 'initial',
    element,
    parentMeasures,
    action,
    dimension,
  } = args;
  if (!dimension) return;

  if (dimension === 'all') {
    setDimensionMax(
      element.parentElement,
      'height',
      `${parentMeasures.height[measured[action][parentState]]}px`
    );
    setDimensionMax(
      element.parentElement,
      'width',
      `${parentMeasures.width[measured[action][parentState]]}px`
    );
  } else {
    setDimensionMax(
      element.parentElement,
      dimension,
      `${parentMeasures.width[measured[action][parentState]]}px`
    );
  }
};

export { getParentMeasures, setParentMaxMeasures, removeDimensionMax };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">JS-CSS Animations</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Thu Nov 17 2022 00:41:51 GMT-0300 (Horário Padrão de Brasília)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
